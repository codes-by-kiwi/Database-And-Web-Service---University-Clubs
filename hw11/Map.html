<!DOCTYPE html> 
<html>  
<head> 
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" /> 

</head> 
<body> 
     <style>

#mapid { height: 500px;width: 500px; margin-left:auto; margin-right:auto;margin-top:auto;margin-bottom:auto }

</style>
</body>  
<div id="mapid"></div>
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script> 
<script src="https://ipinfo.io/json?callback=recordData"></script>  
<script> 
  var result = []
  function recordData (data) { 
    console.log(data.ip, data.country)  
    var c = data.loc; 
    var d;  
    console.log(typeof(c)) 
    console.log(c)  
    var d = parseInt(c)  
    console.log(typeof(d))
    console.log(d) 
    var a = data.loc.split(','); 
    console.log("bafer a"); 
    console.log(a) 
    console.log("after")  
    var lati; 
    var long;
    for( let i = 0; i < a.length; i++){
      if (i == 0){ 
        lati = parseFloat(a[i]);
      } 
      else{
        long = parseFloat(a[i]);
      }
    } 
    console.log("In lati") 
    console.log(lati); 
    console.log("in long");
    console.log(long);
    var user = parseFloat(data.loc); 
    console.log(user) 
    console.log(user[1])  
    console.log("data"); 
    console.log(result);  
    var mymap = L.map('mapid').setView([lati, long], 12);
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(mymap); 
    var marker = L.marker([lati,long]).addTo(mymap); 
    var val = data.ip
    marker.bindPopup("<b>IP address</b><br>" + val).openPopup();
  }
</script>
<script src="https://ipinfo.io/json?callback=recordData"></script>
</html>

